# Media Sync - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –≤ WEEEK

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –∏–∑ –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ WEEEK (–í–ò–ö) —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω–æ–µ API.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
  - –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ (–≤–∫–ª—é—á–∞—è –Ø–Ω–¥–µ–∫—Å.360)
  - Mail.ru Cloud
- **–¢–∏–ø—ã –º–µ–¥–∏–∞:** —Ñ–æ—Ç–æ (jpg, png, webp, heic) –∏ –≤–∏–¥–µ–æ (mp4, mov, avi, mkv)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á** –≤ WEEEK —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–æ–ª—è–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏** - Photo –¥–ª—è —Ñ–æ—Ç–æ, Video –¥–ª—è –≤–∏–¥–µ–æ
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** —á–µ—Ä–µ–∑ dedup-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- **–†–µ–∂–∏–º dry-run** –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- **–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```bash
cp env.example .env
```

```env
# WEEEK API Configuration
WEEEK_API_TOKEN=your_weeek_api_token_here
WEEEK_SPACE_OR_PROJECT_ID=your_space_or_project_id_here

# Optional: Rate limiting and retry settings
MAX_TASKS_PER_BATCH=50
MAX_RETRIES=3
REQUEST_DELAY_MS=1000
```

**–í–∞–∂–Ω–æ:** `WEEEK_SPACE_OR_PROJECT_ID` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å ID –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, –≥–¥–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∑–∞–¥–∞—á–∏. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å, –∑–∞–¥–∞—á–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ.

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ WEEEK

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [developers.weeek.net](https://developers.weeek.net)
2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ access token –≤ —Ä–∞–∑–¥–µ–ª–µ "Generating access token"
4. **–î–ª—è —É–∫–∞–∑–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ URL –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤ WEEEK (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://weeek.net/project/12345` ‚Üí ID = `12345`)

### 4. –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

#### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (dry-run):
```bash
npm run dev -- --dry-run
```

#### –†–µ–∂–∏–º pipe –∏–∑ —Ñ–∞–π–ª–∞:
```bash
echo "https://disk.yandex.ru/d/example" | npm run dev
```

#### –ß—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞:
```bash
npm run dev < links.txt
```

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Å—Å—ã–ª–æ–∫

### –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ / –Ø–Ω–¥–µ–∫—Å.360
- **–§–∞–π–ª:** `https://disk.yandex.ru/i/...`
- **–ü–∞–ø–∫–∞:** `https://disk.yandex.ru/d/...`
- **360:** `https://disk.360.yandex.ru/d/...`

### Mail.ru Cloud
- **–ü—É–±–ª–∏—á–Ω–∞—è –ø–∞–ø–∫–∞:** `https://cloud.mail.ru/public/...`

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ config/          # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ input/           # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫
‚îú‚îÄ‚îÄ filters/         # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ providers/       # –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ weeek/           # –ö–ª–∏–µ–Ω—Ç WEEEK API
‚îú‚îÄ‚îÄ sync/            # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ types/           # TypeScript —Ç–∏–ø—ã
```

## üìä –ü—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö URL
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
3. **–°–±–æ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ–¥–∏–∞** - –æ—Ç–±–æ—Ä —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ —Ñ–∞–π–ª–æ–≤
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** - –ø–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–¥–∞—á
6. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á** - –±–∞—Ç—á–µ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤ WEEEK

## üé® –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–¥–∞—á –≤ WEEEK

### –ó–∞–≥–æ–ª–æ–≤–æ–∫
```
MEDIA:: filename.jpg [a1b2c3d4]
```

### –û–ø–∏—Å–∞–Ω–∏–µ
- –¢–∏–ø –º–µ–¥–∏–∞ (—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ)
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä (–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫/Mail.ru)
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
- –ò—Å—Ö–æ–¥–Ω–∞—è —Å—Å—ã–ª–∫–∞
- –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (–Ø–Ω–¥–µ–∫—Å)
- Dedup ID

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è
- **Media Type:** Photo/Video
- **Original Upload Date:** –¥–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- **Source URL:** –∏—Å—Ö–æ–¥–Ω–∞—è –ø—É–±–ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `WEEEK_API_TOKEN` | Bearer —Ç–æ–∫–µ–Ω –¥–ª—è API | - |
| `WEEEK_BOARD_ID` | ID –¥–æ—Å–∫–∏ –≤ WEEEK | - |
| `WEEEK_COLUMN_ID` | ID –∫–æ–ª–æ–Ω–∫–∏ –≤ –¥–æ—Å–∫–µ | - |
| `MAX_TASKS_PER_BATCH` | –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á | 50 |
| `MAX_RETRIES` | –ú–∞–∫—Å–∏–º—É–º –ø–æ–≤—Ç–æ—Ä–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö | 3 |
| `REQUEST_DELAY_MS` | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–º—Å) | 1000 |

## üîç –†–µ–∂–∏–º Dry-Run

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `--dry-run` –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:

```bash
npm run dev -- --dry-run
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –°–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
- –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –∑–∞–¥–∞—á–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–¥–Ω–æ–π –ø–∞–ø–∫–∏
```bash
echo "https://disk.yandex.ru/d/example_folder" | npm run dev
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
cat > links.txt << EOF
https://disk.yandex.ru/d/folder1
https://disk.yandex.ru/d/folder2
https://cloud.mail.ru/public/example
EOF

npm run dev < links.txt
```

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
```bash
echo "https://disk.yandex.ru/d/example" | npm run dev -- --dry-run
```

## üö® –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **Mail.ru Cloud:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ API, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞
- **–î–∞—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏:** –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- **–ë–æ–ª—å—à–∏–µ –ø–∞–ø–∫–∏:** —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å `MAX_TASKS_PER_BATCH`
- **Rate limiting:** –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `REQUEST_DELAY_MS` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞
```bash
npm run build
```

### –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
```bash
npm start
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å hot-reload
```bash
npm run dev
```

## üìö API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [WEEEK API](https://developers.weeek.net)
- [–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ API](https://yandex.ru/dev/disk/rest/)
- [Mail.ru Cloud](https://cloud.mail.ru/) (–Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ API)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API WEEEK
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Å—ã–ª–æ–∫
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º `--dry-run` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 